<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="538px" preserveAspectRatio="none" style="width:1111px;height:538px;background:#FFFFFF;" version="1.1" viewBox="0 0 1111 538" width="1111px" zoomAndPan="magnify"><defs><filter height="300%" id="fpaj9emndbr5e" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="697" cy="16" fill="#000000" filter="url(#fpaj9emndbr5e)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="50" x="525" y="133"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="530.5" y="157.8467">nginx</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="50" x="858" y="133"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="867" y="157.8467">bind</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="61" x="865.5" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="870.5" y="274.8467">dyndns</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="61" x="130.5" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="135.5" y="274.8467">postfix</text><ellipse cx="124" cy="16" filter="url(#fpaj9emndbr5e)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;fill:none;"/><ellipse cx="124.5" cy="16.5" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="67" x="26.5" y="133"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="57" x="31.5" y="157.8467">padlock</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="50" x="7" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="14" y="274.8467">dkim</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="69" x="273.5" y="484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="278.5" y="508.8467">dovecot</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="87" x="264.5" y="367"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="269.5" y="391.8467">imapproxy</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="93" x="261.5" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="266.5" y="274.8467">squirrelmail</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="53" x="417.5" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="422.5" y="274.8467">baikal</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="149" x="577.5" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="582.5" y="274.8467">opendkim-testmsg</text><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="68" x="762" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="767" y="274.8467">logshow</text><ellipse cx="1051" cy="16" filter="url(#fpaj9emndbr5e)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;fill:none;"/><ellipse cx="1051.5" cy="16.5" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#fpaj9emndbr5e)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="93" x="1004.5" y="133"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1009.5" y="157.8467">dehydrated</text><!--MD5=[27c3991972a4f6bd91780d661cb037fd]
link *start to nginx--><path d="M689.91,23.511 C669.409,42.339 609.335,97.509 574.939,129.097 " fill="none" id="*start-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="570.876,132.828,580.2101,129.6856,574.5583,129.4456,574.7983,123.7939,570.876,132.828" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="680.5" y="69.0669">http, https,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="674.5" y="84.1997">imap, imaps,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="655" y="99.3325">smtp (+STARTTLS)</text><!--MD5=[b02cb77bac88a868f90c0a7cf4bce7a9]
link *start to bind--><path d="M706.409,19.849 C723.303,25.232 759.485,37.992 786,56 C816.63,76.803 846.01,107.981 864.253,129.116 " fill="none" id="*start-to-bind" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="867.527,132.941,864.7113,123.5032,864.2748,129.1432,858.6348,128.7067,867.527,132.941" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="840" y="84.0669">dns</text><!--MD5=[b8dd797f47e13474860a08a16b45a11e]
link nginx to dyndns--><path d="M575.278,160.374 C609.327,169.128 671.691,185.758 724,203 C779.975,221.45 793.043,228.709 848,250 C852.025,251.559 856.233,253.204 860.415,254.847 " fill="none" id="nginx-to-dyndns" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="865.298,256.77,858.3892,249.7509,860.6456,254.9382,855.4583,257.1947,865.298,256.77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="773" y="216.0669">http</text><!--MD5=[b8ee63c6884aec7ba3cb1f3be66795a1]
reverse link bind to dyndns--><path d="M885.763,178.445 C888.167,199.705 891.602,230.096 893.817,249.689 " fill="none" id="bind-backto-dyndns" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="885.176,173.248,882.2118,182.6402,885.7374,178.2164,890.1612,181.742,885.176,173.248" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="891" y="216.0669">nsupdate</text><!--MD5=[624d6260d8d2c8e9bc70f4a746f5bce3]
link nginx to postfix--><path d="M524.973,156.109 C477.322,160.672 370.758,173.527 286,203 C253.814,214.192 219.768,232.661 195.349,247.219 " fill="none" id="nginx-to-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="190.904,249.889,200.679,248.6852,195.1906,247.3151,196.5607,241.8266,190.904,249.889" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="287" y="216.0669">smtp+XCLIENT</text><!--MD5=[2ffb59642e9db47b3f7aea3e5ce91a70]
reverse link padlock to postfix--><path d="M73.0538,177.569 C80.8851,190.719 91.5327,207.014 103,220 C112.598,230.869 124.656,241.444 135.288,249.972 " fill="none" id="padlock-backto-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="70.5089,173.24,71.6221,183.0257,73.043,177.5503,78.5185,178.9712,70.5089,173.24" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="104" y="216.0669">smtp</text><!--MD5=[9ad78d9e685c8730be3f44dbe281e65c]
reverse link postfix1 to postfix--><path d="M131.269,29.802 C135.127,37.218 139.564,46.867 142,56 C160.564,125.591 161.903,212.03 161.463,249.817 " fill="none" id="postfix1-backto-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="128.721,25.058,129.4546,34.8795,131.0864,29.4631,136.5028,31.0949,128.721,25.058" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="161" y="157.5669">smtp</text><!--MD5=[601cf20fb6d31398fc9db44ff8c38d03]
reverse link postfix1 to padlock--><path d="M117.037,29.378 C112.832,36.986 107.445,46.973 103,56 C90.0927,82.214 76.5227,113.161 68.1602,132.684 " fill="none" id="postfix1-backto-padlock" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="119.483,24.978,111.6133,30.8998,117.0531,29.3478,118.605,34.7876,119.483,24.978" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="104" y="84.0669">smtp</text><!--MD5=[c70f6090e57325a8380c85284e334bd4]
reverse link dkim to postfix--><path d="M62.25,270 C82.7805,270 109.832,270 130.43,270 " fill="none" id="dkim-backto-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="57.1787,270,66.1787,274,62.1787,270,66.1787,266,57.1787,270" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="75.25" y="263.0669">milter</text><!--MD5=[69c50acf091c3a2247127594012e5451]
link postfix to dovecot--><path d="M166.213,290.121 C174.214,317.482 191.237,368.722 216,407 C234.221,435.1646 261.399,462.2865 281.494,480.4747 " fill="none" id="postfix-to-dovecot" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="285.414,483.9909,281.385,475.0038,281.6919,480.6524,276.0434,480.9592,285.414,483.9909" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="217" y="391.5669">lmtp</text><!--MD5=[ce465f9e4de3e79c699cf1f0de5c5283]
link nginx to dovecot--><path d="M543.113,173.309 C533.012,200.457 512.677,250.955 488,290 C437.107,370.526 411.665,381.391 350,454 C342.77,462.5134 334.802,471.8266 327.767,480.0258 " fill="none" id="nginx-to-dovecot" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="324.396,483.953,333.2931,479.7291,327.6526,480.159,327.2227,474.5185,324.396,483.953" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86" x="469" y="333.0669">imap+PROXY</text><!--MD5=[e685cdd6f8d7b9b34b0290cfb30a792b]
link imapproxy to dovecot--><path d="M308,407.248 C308,426.8183 308,457.207 308,478.487 " fill="none" id="imapproxy-to-dovecot" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="308,483.6888,312,474.6888,308,478.6888,304,474.6888,308,483.6888" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="309" y="450.0669">imap</text><!--MD5=[191b4724f642aa285e484df8c510527c]
reverse link postfix to squirrelmail--><path d="M197.142,270 C216.489,270 240.541,270 261.292,270 " fill="none" id="postfix-backto-squirrelmail" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="191.816,270,200.816,274,196.816,270,200.816,266,191.816,270" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="210" y="263.0669">smtp</text><!--MD5=[4fa123327d84b6175c02fd7f3012f145]
link squirrelmail to imapproxy--><path d="M308,290.248 C308,309.818 308,340.207 308,361.487 " fill="none" id="squirrelmail-to-imapproxy" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="308,366.689,312,357.689,308,361.689,304,357.689,308,366.689" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="309" y="333.0669">imap</text><!--MD5=[707e0b4858acf3ca846b6c7536855bc1]
link squirrelmail to baikal--><path d="M354.803,270 C373.744,270 395.121,270 412.199,270 " fill="none" id="squirrelmail-to-baikal" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="417.354,270,408.354,266,412.354,270,408.354,274,417.354,270" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="373" y="263.0669">http</text><!--MD5=[3bbcc11b9009efdee03c535b10513634]
link nginx to squirrelmail--><path d="M524.921,162.528 C499.161,171.57 458.123,186.765 424,203 C396.146,216.252 365.893,233.57 343.268,247.14 " fill="none" id="nginx-to-squirrelmail" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="338.847,249.802,348.6208,248.5881,343.1309,247.2236,344.4954,241.7338,338.847,249.802" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="425" y="216.0669">http</text><!--MD5=[1fc4b39773a803e6ed30e14c7fdcd0dc]
link nginx to baikal--><path d="M524.638,164.307 C507.21,172.517 484.659,185.534 470,203 C459.846,215.098 453.34,231.639 449.376,245.135 " fill="none" id="nginx-to-baikal" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="448.029,249.955,454.3036,242.3636,449.3747,245.1395,446.5988,240.2105,448.029,249.955" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="471" y="216.0669">http</text><!--MD5=[9e8de672bb819e1122547c6c0a683d17]
link nginx to logshow--><path d="M575.4,165.874 C618.45,185.999 706.019,226.936 756.925,250.733 " fill="none" id="nginx-to-logshow" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="761.734,252.981,755.277,245.5442,757.2051,250.8623,751.887,252.7904,761.734,252.981" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="689" y="216.0669">http</text><!--MD5=[96a57862ae61e101991cb2d8743fa78e]
link nginx to opendkimtestmsg--><path d="M567.073,173.248 C584.798,193.233 612.53,224.5 631.447,245.827 " fill="none" id="nginx-to-opendkimtestmsg" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="634.872,249.689,631.8926,240.3016,631.5543,245.9483,625.9075,245.61,634.872,249.689" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="609" y="216.0669">http</text><!--MD5=[f4aa1899b9e29805a9dbf17ad6fa8549]
reverse link bind to dehydrated--><path d="M913.386,153 C938.746,153 975.306,153 1004.369,153 " fill="none" id="bind-backto-dehydrated" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="908.151,153,917.151,157,913.151,153,917.151,149,908.151,153" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="926.25" y="146.0669">nsupdate</text><!--MD5=[7e977eaa2729d87b8fa5b057e1877163]
reverse link dehydrated1 to dehydrated--><path d="M1051,31.379 C1051,55.857 1051,105.625 1051,132.962 " fill="none" id="dehydrated1-backto-dehydrated" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1051,26.279,1047,35.279,1051,31.279,1055,35.279,1051,26.279" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="1052" y="84.0669">acme</text><!--MD5=[eb77bcabe3bd943530675f2239b4b024]
@startuml
hide empty description

[*] - -> nginx: http, https,\nimap, imaps,\nsmtp (+STARTTLS)

[*] - -> bind: dns
nginx - -> dyndns: http
dyndns -u-> bind: nsupdate

state postfix
state postfix1 <<end>>
nginx - -> postfix: smtp+XCLIENT
postfix -u-> padlock: smtp
postfix -u-> postfix1: smtp
padlock -u-> postfix1: smtp

state dkim
postfix -l-> dkim: milter

state dovecot
postfix - -> dovecot: lmtp
nginx - -> dovecot: imap+PROXY

state imapproxy
imapproxy - -> dovecot: imap

state squirrelmail
squirrelmail -l-> postfix: smtp
squirrelmail - -> imapproxy: imap
squirrelmail -> baikal: http
nginx - -> squirrelmail: http

state "opendkim-testmsg" as opendkimtestmsg

nginx - -> baikal: http
nginx - -> logshow: http
nginx - -> opendkimtestmsg: http

state dehydrated1 <<end>>
dehydrated -l-> bind: nsupdate
dehydrated -u-> dehydrated1: acme
@enduml

PlantUML version 1.2021.14(Fri Nov 12 16:46:50 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
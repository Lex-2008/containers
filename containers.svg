<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="523px" preserveAspectRatio="none" style="width:714px;height:523px;background:#FFFFFF;" version="1.1" viewBox="0 0 714 523" width="714px" zoomAndPan="magnify"><defs><filter height="300%" id="f1hh5jf948f1d7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="550" cy="16" fill="#000000" filter="url(#f1hh5jf948f1d7)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="50" x="439" y="118"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="444.5" y="142.8467">nginx</text><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="50" x="620" y="118"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="629" y="142.8467">bind</text><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="61" x="613.5" y="235"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="618.5" y="259.8467">dyndns</text><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="61" x="130.5" y="235"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="135.5" y="259.8467">postfix</text><ellipse cx="161" cy="138" filter="url(#f1hh5jf948f1d7)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;fill:none;"/><ellipse cx="161.5" cy="138.5" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="50" x="7" y="235"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="14" y="259.8467">dkim</text><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="69" x="187.5" y="469"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="192.5" y="493.8467">dovecot</text><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="87" x="250.5" y="352"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="255.5" y="376.8467">imapproxy</text><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="93" x="261.5" y="235"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="266.5" y="259.8467">squirrelmail</text><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="53" x="417.5" y="235"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="422.5" y="259.8467">baikal</text><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="149" x="227.5" y="118"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="232.5" y="142.8467">opendkim-testmsg</text><rect fill="#FEFECE" filter="url(#f1hh5jf948f1d7)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="68" x="506" y="235"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="511" y="259.8467">logshow</text><!--MD5=[27c3991972a4f6bd91780d661cb037fd]
link *start to nginx--><path d="M540.056,18.421 C522.128,21.569 484.704,30.949 468,56 C456.957,72.561 456.891,95.534 459.046,112.785 " fill="none" id="*start-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="459.776,117.942,462.4741,108.4699,459.0747,112.9914,454.5532,109.592,459.776,117.942" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="494.5" y="69.0669">http, https,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="469" y="84.1997">smtp (+STARTTLS)</text><!--MD5=[b02cb77bac88a868f90c0a7cf4bce7a9]
link *start to bind--><path d="M557.835,22.414 C567.569,29.4 584.319,42.294 596,56 C611.007,73.608 624.325,96.343 633.275,113.242 " fill="none" id="*start-to-bind" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="635.681,117.845,635.0579,108.0159,633.3653,113.4136,627.9676,111.721,635.681,117.845" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="620" y="76.5669">dns</text><!--MD5=[b8dd797f47e13474860a08a16b45a11e]
link nginx to dyndns--><path d="M489.329,155.091 C504.355,164.643 523.772,176.999 541,188 C563.965,202.665 589.781,219.207 609.823,232.062 " fill="none" id="nginx-to-dyndns" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="614.268,234.913,608.8528,226.6865,610.0596,232.2131,604.533,233.4199,614.268,234.913" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="568" y="201.0669">http</text><!--MD5=[b8ee63c6884aec7ba3cb1f3be66795a1]
reverse link bind to dyndns--><path d="M644.787,163.445 C644.603,184.705 644.338,215.096 644.168,234.689 " fill="none" id="bind-backto-dyndns" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="644.833,158.248,640.756,167.2134,644.7901,163.2478,648.7557,167.282,644.833,158.248" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="646" y="201.0669">nsupdate</text><!--MD5=[624d6260d8d2c8e9bc70f4a746f5bce3]
link nginx to postfix--><path d="M438.769,146.017 C425.472,149.673 408.877,154.167 394,158 C339.51,172.038 323.048,166.616 271,188 C242.804,199.585 213.313,217.649 191.973,231.952 " fill="none" id="nginx-to-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="187.816,234.759,197.5129,233.0357,191.9592,231.9602,193.0348,226.4065,187.816,234.759" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="272" y="201.0669">smtp+XCLIENT</text><!--MD5=[9ad78d9e685c8730be3f44dbe281e65c]
reverse link postfix1 to postfix--><path d="M159.91,153.062 C159.208,162.851 158.361,176.212 158,188 C157.516,203.821 158.426,221.764 159.367,234.944 " fill="none" id="postfix1-backto-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="160.282,148.024,155.6294,156.7046,159.9134,153.0104,163.6076,157.2944,160.282,148.024" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="159" y="201.0669">smtp</text><!--MD5=[c70f6090e57325a8380c85284e334bd4]
reverse link dkim to postfix--><path d="M62.25,255 C82.7805,255 109.832,255 130.43,255 " fill="none" id="dkim-backto-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="57.1787,255,66.1787,259,62.1787,255,66.1787,251,57.1787,255" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="75.25" y="248.0669">milter</text><!--MD5=[69c50acf091c3a2247127594012e5451]
link postfix to dovecot--><path d="M166.096,275.381 C177.18,317.536 203.457,417.4767 215.62,463.7345 " fill="none" id="postfix-to-dovecot" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="216.961,468.8372,218.54,459.1157,215.6891,464.0017,210.8032,461.1508,216.961,468.8372" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="198" y="376.5669">lmtp</text><!--MD5=[e685cdd6f8d7b9b34b0290cfb30a792b]
link imapproxy to dovecot--><path d="M281.949,392.248 C269.541,412.0671 250.186,442.9814 236.842,464.2941 " fill="none" id="imapproxy-to-dovecot" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="234.09,468.6888,242.2567,463.1838,236.7436,464.4511,235.4764,458.938,234.09,468.6888" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="264" y="435.0669">imap</text><!--MD5=[191b4724f642aa285e484df8c510527c]
reverse link postfix to squirrelmail--><path d="M197.142,255 C216.489,255 240.541,255 261.292,255 " fill="none" id="postfix-backto-squirrelmail" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="191.816,255,200.816,259,196.816,255,200.816,251,191.816,255" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="210" y="248.0669">smtp</text><!--MD5=[4fa123327d84b6175c02fd7f3012f145]
link squirrelmail to imapproxy--><path d="M305.657,275.248 C303.274,294.818 299.575,325.207 296.984,346.487 " fill="none" id="squirrelmail-to-imapproxy" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="296.351,351.689,301.4095,343.2385,296.9553,346.7257,293.4681,342.2715,296.351,351.689" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="303" y="318.0669">imap</text><!--MD5=[707e0b4858acf3ca846b6c7536855bc1]
link squirrelmail to baikal--><path d="M354.803,255 C373.744,255 395.121,255 412.199,255 " fill="none" id="squirrelmail-to-baikal" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="417.354,255,408.354,251,412.354,255,408.354,259,417.354,255" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="373" y="248.0669">http</text><!--MD5=[3bbcc11b9009efdee03c535b10513634]
link nginx to squirrelmail--><path d="M438.936,157.477 C411.435,177.749 367.313,210.276 337.995,231.888 " fill="none" id="nginx-to-squirrelmail" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="333.781,234.995,343.399,232.8752,337.8059,232.0285,338.6526,226.4353,333.781,234.995" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="397" y="201.0669">http</text><!--MD5=[1fc4b39773a803e6ed30e14c7fdcd0dc]
link nginx to baikal--><path d="M452.53,158.319 C447.98,167.064 443.291,177.727 441,188 C437.963,201.616 438.489,217.192 439.878,229.791 " fill="none" id="nginx-to-baikal" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="440.518,234.995,443.3872,225.5733,439.9064,230.0325,435.4472,226.5518,440.518,234.995" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="442" y="201.0669">http</text><!--MD5=[9e8de672bb819e1122547c6c0a683d17]
link nginx to logshow--><path d="M476.721,158.248 C489.818,178.067 510.249,208.981 524.333,230.294 " fill="none" id="nginx-to-logshow" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="527.238,234.689,525.6147,224.9748,524.482,230.5171,518.9397,229.3844,527.238,234.689" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="508" y="201.0669">http</text><!--MD5=[ea4d8a339f12da271c5bbe6a6dfe5c6c]
reverse link opendkimtestmsg to nginx--><path d="M382.09,138 C402.777,138 423.544,138 438.991,138 " fill="none" id="opendkimtestmsg-backto-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="376.835,138,385.835,142,381.835,138,385.835,134,376.835,138" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="394.75" y="131.0669">http</text><!--MD5=[217d2175d435eb1894cd6f988bdc9fbc]
@startuml
hide empty description

[*] - -> nginx: http, https,\nsmtp (+STARTTLS)

[*] - -> bind: dns
nginx - -> dyndns: http
dyndns -u-> bind: nsupdate

state postfix
nginx - -> postfix: smtp+XCLIENT
state postfix1 <<end>>
postfix -u-> postfix1: smtp

state dkim
postfix -l-> dkim: milter

state dovecot
postfix - -> dovecot: lmtp

state imapproxy
imapproxy - -> dovecot: imap

state squirrelmail
squirrelmail -l-> postfix: smtp
squirrelmail - -> imapproxy: imap
squirrelmail -> baikal: http
nginx - -> squirrelmail: http

state "opendkim-testmsg" as opendkimtestmsg

nginx - -> baikal: http
nginx - -> logshow: http
nginx -l-> opendkimtestmsg: http
@enduml

PlantUML version 1.2021.12(Tue Oct 05 16:01:58 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>
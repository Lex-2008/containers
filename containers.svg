<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="538px" preserveAspectRatio="none" style="width:716px;height:538px;background:#FFFFFF;" version="1.1" viewBox="0 0 716 538" width="716px" zoomAndPan="magnify"><defs><filter height="300%" id="f2e9yrr1q98a0" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="558" cy="16" fill="#000000" filter="url(#f2e9yrr1q98a0)" rx="10" ry="10" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="50" x="419" y="133"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39" x="424.5" y="157.8467">nginx</text><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="50" x="635" y="133"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32" x="644" y="157.8467">bind</text><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="61" x="601.5" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="606.5" y="274.8467">dyndns</text><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="61" x="130.5" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="135.5" y="274.8467">postfix</text><ellipse cx="161" cy="153" filter="url(#f2e9yrr1q98a0)" rx="10" ry="10" style="stroke:#000000;stroke-width:1.0;fill:none;"/><ellipse cx="161.5" cy="153.5" fill="#000000" rx="6" ry="6" style="stroke:none;stroke-width:1.0;"/><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="50" x="7" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="14" y="274.8467">dkim</text><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="69" x="273.5" y="484"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="278.5" y="508.8467">dovecot</text><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="87" x="264.5" y="367"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77" x="269.5" y="391.8467">imapproxy</text><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="93" x="261.5" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="266.5" y="274.8467">squirrelmail</text><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="53" x="417.5" y="250"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="422.5" y="274.8467">baikal</text><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="149" x="207.5" y="133"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139" x="212.5" y="157.8467">opendkim-testmsg</text><rect fill="#FEFECE" filter="url(#f2e9yrr1q98a0)" height="40" rx="12.5" ry="12.5" style="stroke:#A80036;stroke-width:1.5;" width="68" x="532" y="133"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="58" x="537" y="157.8467">logshow</text><!--MD5=[27c3991972a4f6bd91780d661cb037fd]
link *start to nginx--><path d="M548.167,18.528 C529.946,21.887 490.891,31.648 470,56 C452.795,76.055 446.869,106.438 444.885,127.634 " fill="none" id="*start-to-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="444.461,132.813,449.1831,124.17,444.8696,127.8297,441.2099,123.5162,444.461,132.813" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="496.5" y="69.0669">http, https,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83" x="490.5" y="84.1997">imap, imaps,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="471" y="99.3325">smtp (+STARTTLS)</text><!--MD5=[b02cb77bac88a868f90c0a7cf4bce7a9]
link *start to bind--><path d="M565.8,22.733 C575.135,29.843 590.894,42.667 602,56 C620.806,78.578 637.595,107.895 648.209,128.161 " fill="none" id="*start-to-bind" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="650.641,132.852,650.0505,123.0209,648.34,128.4129,642.948,126.7024,650.641,132.852" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="23" x="634" y="84.0669">dns</text><!--MD5=[b8dd797f47e13474860a08a16b45a11e]
link nginx to dyndns--><path d="M469.193,163.977 C490.781,172.964 522.356,187.166 548,203 C568.803,215.845 590.456,232.962 606.567,246.546 " fill="none" id="nginx-to-dyndns" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="610.54,249.918,606.2661,241.0448,606.7277,246.6828,601.0897,247.1444,610.54,249.918" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="574" y="216.0669">http</text><!--MD5=[b8ee63c6884aec7ba3cb1f3be66795a1]
reverse link bind to dyndns--><path d="M654.114,178.175 C648.935,199.448 641.493,230.013 636.702,249.689 " fill="none" id="bind-backto-dyndns" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="655.313,173.248,649.2954,181.0447,654.1289,178.1058,657.0679,182.9393,655.313,173.248" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="648" y="216.0669">nsupdate</text><!--MD5=[624d6260d8d2c8e9bc70f4a746f5bce3]
link nginx to postfix--><path d="M418.733,160.88 C405.426,164.498 388.833,169 374,173 C324.244,186.416 309.048,181.975 262,203 C236.042,214.6 209.217,232.453 189.742,246.668 " fill="none" id="nginx-to-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="185.453,249.826,195.0719,247.71,189.4791,246.8611,190.328,241.2683,185.453,249.826" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="263" y="216.0669">smtp+XCLIENT</text><!--MD5=[9ad78d9e685c8730be3f44dbe281e65c]
reverse link postfix1 to postfix--><path d="M160.129,168.678 C159.437,182.051 158.64,202.35 159,220 C159.201,229.874 159.631,240.861 160.041,249.924 " fill="none" id="postfix1-backto-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="160.416,163.398,155.9359,172.1689,160.146,168.3907,163.9242,172.6009,160.416,163.398" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="160" y="216.0669">smtp</text><!--MD5=[c70f6090e57325a8380c85284e334bd4]
reverse link dkim to postfix--><path d="M62.25,270 C82.7805,270 109.832,270 130.43,270 " fill="none" id="dkim-backto-postfix" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="57.1787,270,66.1787,274,62.1787,270,66.1787,266,57.1787,270" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37" x="75.25" y="263.0669">milter</text><!--MD5=[69c50acf091c3a2247127594012e5451]
link postfix to dovecot--><path d="M166.213,290.121 C174.214,317.482 191.237,368.722 216,407 C234.221,435.1646 261.399,462.2865 281.494,480.4747 " fill="none" id="postfix-to-dovecot" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="285.414,483.9909,281.385,475.0038,281.6919,480.6524,276.0434,480.9592,285.414,483.9909" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="217" y="391.5669">lmtp</text><!--MD5=[ce465f9e4de3e79c699cf1f0de5c5283]
link nginx to dovecot--><path d="M461.348,173.203 C468.182,181.76 475.466,192.31 480,203 C495.161,238.748 501.306,253.521 488,290 C457.785,372.837 379.458,445.6145 336.769,480.7193 " fill="none" id="nginx-to-dovecot" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="332.752,483.998,342.2538,481.4064,336.6257,480.8366,337.1955,475.2085,332.752,483.998" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="475" y="333.0669">imap</text><!--MD5=[e685cdd6f8d7b9b34b0290cfb30a792b]
link imapproxy to dovecot--><path d="M308,407.248 C308,426.8183 308,457.207 308,478.487 " fill="none" id="imapproxy-to-dovecot" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="308,483.6888,312,474.6888,308,478.6888,304,474.6888,308,483.6888" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="309" y="450.0669">imap</text><!--MD5=[191b4724f642aa285e484df8c510527c]
reverse link postfix to squirrelmail--><path d="M197.142,270 C216.489,270 240.541,270 261.292,270 " fill="none" id="postfix-backto-squirrelmail" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="191.816,270,200.816,274,196.816,270,200.816,266,191.816,270" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="33" x="210" y="263.0669">smtp</text><!--MD5=[4fa123327d84b6175c02fd7f3012f145]
link squirrelmail to imapproxy--><path d="M308,290.248 C308,309.818 308,340.207 308,361.487 " fill="none" id="squirrelmail-to-imapproxy" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="308,366.689,312,357.689,308,361.689,304,357.689,308,366.689" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="32" x="309" y="333.0669">imap</text><!--MD5=[707e0b4858acf3ca846b6c7536855bc1]
link squirrelmail to baikal--><path d="M354.803,270 C373.744,270 395.121,270 412.199,270 " fill="none" id="squirrelmail-to-baikal" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="417.354,270,408.354,266,412.354,270,408.354,274,417.354,270" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="373" y="263.0669">http</text><!--MD5=[3bbcc11b9009efdee03c535b10513634]
link nginx to squirrelmail--><path d="M421.237,173.248 C397.407,193.399 360.012,225.019 334.779,246.356 " fill="none" id="nginx-to-squirrelmail" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="330.838,249.689,340.2933,246.9327,334.6562,246.4608,335.1281,240.8236,330.838,249.689" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="386" y="216.0669">http</text><!--MD5=[1fc4b39773a803e6ed30e14c7fdcd0dc]
link nginx to baikal--><path d="M444,173.248 C444,192.818 444,223.207 444,244.487 " fill="none" id="nginx-to-baikal" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="444,249.689,448,240.689,444,244.689,440,240.689,444,249.689" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="445" y="216.0669">http</text><!--MD5=[9e8de672bb819e1122547c6c0a683d17]
link nginx to logshow--><path d="M469.278,153 C485.865,153 507.893,153 526.737,153 " fill="none" id="nginx-to-logshow" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="531.96,153,522.96,149,526.96,153,522.96,157,531.96,153" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="487.5" y="146.0669">http</text><!--MD5=[ea4d8a339f12da271c5bbe6a6dfe5c6c]
reverse link opendkimtestmsg to nginx--><path d="M362.09,153 C382.777,153 403.544,153 418.991,153 " fill="none" id="opendkimtestmsg-backto-nginx" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="356.835,153,365.835,157,361.835,153,365.835,149,356.835,153" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="374.75" y="146.0669">http</text><!--MD5=[b72564b639adad65b5650b7faf43b389]
@startuml
hide empty description

[*] - -> nginx: http, https,\nimap, imaps,\nsmtp (+STARTTLS)

[*] - -> bind: dns
nginx - -> dyndns: http
dyndns -u-> bind: nsupdate

state postfix
nginx - -> postfix: smtp+XCLIENT
state postfix1 <<end>>
postfix -u-> postfix1: smtp

state dkim
postfix -l-> dkim: milter

state dovecot
postfix - -> dovecot: lmtp
nginx - -> dovecot: imap

state imapproxy
imapproxy - -> dovecot: imap

state squirrelmail
squirrelmail -l-> postfix: smtp
squirrelmail - -> imapproxy: imap
squirrelmail -> baikal: http
nginx - -> squirrelmail: http

state "opendkim-testmsg" as opendkimtestmsg

nginx - -> baikal: http
nginx -r-> logshow: http
nginx -l-> opendkimtestmsg: http
@enduml

PlantUML version 1.2021.13beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>